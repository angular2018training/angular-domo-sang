<div fxFill id="tenant-user-dialog">
  <div fxFill fxLayout="column">
    <form [formGroup]="updateUserForm">
      <fieldset class="title-user-detail">
        <div fxLayout="row" fxLayoutAlign="start center" class=" user-detail">
                    <span class="page-title" style="text-transform: inherit;">{{'tags.userManagement.userDetail' | translate}}</span>
          <div fxFlex></div>
          <button mat-icon-button mat-dialog-close>
            <mat-icon aria-label="Close">close</mat-icon>
          </button>
        </div>
      </fieldset>
      <fieldset>
        <div class="form-group common-input" fxLayout="row" fxFlexAlign="center center">
                <label fxFlex="20" for="">{{'tags.userManagement.email' | translate}}
            <span style="color: red"> *</span>
          </label>
          <div fxFlex="70" fxLayout="column" fxFlexAlign="start center">
            <input [(ngModel)]="adminModel.email" formControlName="email" required type="text" class="form-control " [readonly]="adminModel.id" [maxlength]="inputMaxName"
              style="margin-left: 35px;">
          </div>
        </div>

        <div class="form-group common-input " fxLayout="row" fxFlexAlign="center center">
                <label fxFlex="20" for="">{{'tags.userManagement.firstName' | translate}}
            <span style="color: red"> *</span>
          </label>
          <div fxFlex="70" fxLayout="column" fxFlexAlign="start center">
            <input [(ngModel)]="adminModel.firstName" formControlName="firstName" [pattern]="patternInput" required type="text" class="form-control input-main"
              [maxlength]="inputMaxName">
            <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="color-error fs-12">
              <div *ngIf="firstName.errors.required">
                        {{'tags.message.required.field' | translate}}
              </div>
              <div *ngIf="firstName.errors?.pattern">
                Incorrect input
              </div>
            </div>
            <div *ngIf="adminModel.firstName.length == 100" class="color-error fs-12">
                      {{'tags.message.length' | translate}}
            </div>
          </div>
        </div>

        <div class="form-group common-input " fxLayout="row" fxFlexAlign="center center">
                <label fxFlex="20" for="">{{'tags.userManagement.lastName' | translate}}
            <span style="color: red"> *</span>
          </label>
          <div fxFlex="70" fxLayout="column" fxFlexAlign="start center">
            <input [(ngModel)]="adminModel.lastName" formControlName="lastName" [pattern]="patternInput" required type="text" class="form-control input-main"
              [maxlength]="inputMaxName">
            <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="color-error fs-12">
              <div *ngIf="lastName.errors.required">
                        {{'tags.message.required.field' | translate}}
              </div>
              <div *ngIf="lastName.errors?.pattern">
                Incorrect input
              </div>
            </div>
            <div *ngIf="adminModel.lastName.length == 100" class="color-error fs-12">
                      {{'tags.message.length' | translate}}
            </div>
          </div>
        </div>

        <div class="form-group common-input " fxLayout="row" fxFlexAlign="center center">
                  <label fxFlex="20" for="">{{'tags.userManagement.phone' | translate}}</label>
          <div fxFlex="70" fxLayout="column" fxFlexAlign="start center">
            <input [(ngModel)]="adminModel.phone" formControlName="phone" [pattern]="numberPattern" type="text" class="form-control input-main"
              [maxlength]="inputMaxPhone">
            <div *ngIf=" adminModel.phone.length == 16" class="color-error fs-12">
                        {{'tags.message.invalid.phone.length' | translate}}
            </div>
            <div *ngIf="phone.errors?.pattern" class="color-error fs-12">
                          {{'tags.message.invalid.phone' | translate}}
            </div>
          </div>
        </div>

        <div class="form-group common-input " fxLayout="row" fxFlexAlign="center center">
            <label fxFlex="20">{{'tags.userManagement.role' | translate}}
            <span style="color: red"> *</span>
          </label>
          <div class="col-sm-5">
            <select [(ngModel)]="adminModel.role" class="selectpicker" formControlName="role">
              <option [value]="2">Consultant</option>
              <option [value]="3">Super Consultant</option>

            </select>
          </div>
        </div>

        <div class="form-group common-input " fxLayout="row" fxFlexAlign="center center">
            <label fxFlex="20">{{'tags.userManagement.language' | translate}}
            <span style="color: red"> *</span>
          </label>
          <div class="col-sm-5">
            <select [(ngModel)]="adminModel.language" class="selectpicker" formControlName="language">
              <option [value]="1">English</option>
              <option [value]="2">Japanese</option>
            </select>
          </div>
        </div>


        <div *ngIf="adminModel.status == '1' || adminModel.status == '2' " class="user-list-body">
          <div class="form-group common-input " fxLayout="row" fxFlexAlign="center center">
                  <label fxFlex="20">{{'tags.userManagement.status' | translate}} 
              <span style="color: red"> *</span>
            </label>
            <div class="col-sm-5">
              <mat-radio-group [(ngModel)]="adminModel.status" [ngModelOptions]="{standalone: true}">
                <mat-radio-button [value]="1" selected>Enable</mat-radio-button>
                <mat-radio-button style="margin-left: 115px;" [value]="2">Disable</mat-radio-button>
              </mat-radio-group>
            </div>
          </div>
        </div>

        <div *ngIf="adminModel.status == '3' || adminModel.status == '4'" class="user-list-body">
          <div class="form-group common-input " fxLayout="row" fxFlexAlign="center center">
                  <label fxFlex="20">{{'tags.userManagement.status' | translate}} 
              <span style="color: red"> *</span>
            </label>
            <div class="col-sm-5">
              <mat-radio-group [(ngModel)]="adminModel.status" [ngModelOptions]="{standalone: true}">
                <mat-radio-button [value]="3" selected>Activated</mat-radio-button>
                <mat-radio-button style="margin-left: 115px;" [value]="4">Deactivated</mat-radio-button>
              </mat-radio-group>
            </div>
          </div>
        </div>
        <div fxLayout="row" class="m-r-10 pull-right">
                    <button mat-button [mat-dialog-close]="true" class="common-btn" (click)="updateDetail()" [disabled]="updateUserForm.invalid">{{'tags.userManagement.updateDetail' | translate}}</button>
        </div>


      </fieldset>
    </form>
    <div *ngIf="adminModel.status == '3' || adminModel.status == '4' " class="user-list-body">
      <form [formGroup]="updatePasswordForm">
        <fieldset>

          <div fxLayout="row" fxLayoutAlign="start center" >
              <span class="page-title reset-password" style="text-transform: inherit; color: dodgerblue">{{'tags.userManagement.resetPassword' | translate}}</span>
          </div>
        </fieldset>

        <fieldset>

          <div class="form-group common-input" fxLayout="row" fxFlexAlign="center center">
                  <label fxFlex="25" for="">{{'tags.userManagement.newPassword' | translate}}
              <span style="color: red"> *</span>
            </label>
            <div fxFlex="65" fxLayout="column" fxFlexAlign="start center">
              <input [(ngModel)]="passwordModel.newPassword" formControlName="newPassword" [pattern]="unamePattern" required type="password"
                class="form-control " style="margin-left: 35px;">
              <div *ngIf="newPassword.errors?.pattern" class="color-error fs-12">
                      {{'tags.message.invalid.password' | translate}}
              </div>
              <div *ngIf="passwordModel.confirmNewPassword.length > 0 && passwordModel.newPassword.length == 0 " class="color-error fs-12">
                      {{'tags.message.required.field' | translate}}
              </div>
            </div>
          </div>
          <div class="form-group common-input " fxLayout="row" fxFlexAlign="center center">
                  <label fxFlex="25" for="">{{'tags.userManagement.confirmNewPassword' | translate}}
              <span style="color: red"> *</span>
            </label>
            <div fxFlex="65" fxLayout="column" fxFlexAlign="start center">
              <input [(ngModel)]="passwordModel.confirmNewPassword" formControlName="confirmNewPassword" required type="password" class="form-control input-main"
                [maxlength]="inputMaxName">
              <div *ngIf="passwordModel.newPassword.length > 0 && passwordModel.confirmNewPassword.length == 0 " class="color-error fs-12">
                        {{'tags.message.required.field' | translate}}
                            </div>
                            <div *ngIf="passwordModel.newPassword.length > 0 && passwordModel.confirmNewPassword.length >0 &&  passwordModel.newPassword != passwordModel.confirmNewPassword" class="color-error fs-12">
                                {{'tags.message.invalid.password.match' | translate}}
                            </div>
                        </div>
                    </div>

          <div fxLayout="row" class="m-r-10 pull-right">
                <button mat-button [mat-dialog-close]="true" class="common-btn" (click)="updatePassword()" >{{'tags.userManagement.updatePassword' | translate}}</button> 
          </div>
        </fieldset>

      </form>
    </div>

  </div>

</div>
